<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    

    
    <link rel="stylesheet" href="/static/build/assets/app.css">
    <script type="module" src="/static/build/assets/app.js"></script>
    
<title>框架整合 - Luminosity 指南</title>
<meta name="description" content="Documentation for 框架整合 in Luminosity SEO Engine.">
<link rel="canonical" href="https://lux.gravito.dev/zh/docs/frameworks">
<meta property="og:title" content="框架整合 - Luminosity 指南">
<meta property="og:type" content="website">
<meta property="og:url" content="https://lux.gravito.dev/zh/docs/frameworks">
<meta property="og:description" content="Documentation for 框架整合 in Luminosity SEO Engine.">
<meta property="og:image" content="https://lux.gravito.dev/og-image.png">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="框架整合 - Luminosity 指南">
<meta name="twitter:description" content="Documentation for 框架整合 in Luminosity SEO Engine.">
<meta name="twitter:image" content="https://lux.gravito.dev/og-image.png">
</head>

<body class="bg-black">
    <div id="app" data-page='{"component":"Docs","props":{"title":"框架整合","content":"&lt;h1&gt;框架整合指南&lt;/h1&gt;\n&lt;p&gt;Luminosity 設計為框架無關 (Framework Agnostic)。無論您使用哪種 Node.js 框架，都可以輕鬆整合 Luminosity 來管理 Sitemap。&lt;/p&gt;\n&lt;h2&gt;Express 整合&lt;/h2&gt;\n&lt;p&gt;在 Express 中，您可以將 Luminosity 作為一個 Middleware 或獨立的 Controller 來使用。&lt;/p&gt;\n&lt;h3&gt;安裝&lt;/h3&gt;\n&lt;pre&gt;&lt;code class=\&quot;language-bash\&quot;&gt;npm install express @gravito/luminosity\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h3&gt;基本用法&lt;/h3&gt;\n&lt;pre&gt;&lt;code class=\&quot;language-typescript\&quot;&gt;import express from &amp;#39;express&amp;#39;\nimport { SeoEngine, SeoRenderer } from &amp;#39;@gravito/luminosity&amp;#39;\n\nconst app = express()\nconst port = 3000\n\n// 1. 初始化引擎\nconst seo = new SeoEngine({\n  mode: &amp;#39;incremental&amp;#39;,\n  baseUrl: &amp;#39;https://example.com&amp;#39;,\n  resolvers: [], // 必須提供，即使是空陣列\n  incremental: {\n      logDir: &amp;#39;./.luminosity&amp;#39;\n  }\n})\n\n// 必須呼叫 init()\nawait seo.init()\n\n// 2. 攔截 URL 變更 (Middleware 範例)\napp.use((req, res, next) =&amp;gt; {\n    // 當有 POST/PUT/DELETE 請求成功時，記錄到 Luminosity\n    res.on(&amp;#39;finish&amp;#39;, () =&amp;gt; {\n        if (res.statusCode &amp;gt;= 200 &amp;amp;&amp;amp; res.statusCode &amp;lt; 300 &amp;amp;&amp;amp; [&amp;#39;POST&amp;#39;, &amp;#39;PUT&amp;#39;, &amp;#39;DELETE&amp;#39;].includes(req.method)) {\n             // 這裡您可以根據 req.path 推導出受影響的頁面 URL\n             // seo.getStrategy().add({ url: ..., lastmod: new Date() })\n        }\n    })\n    next()\n})\n\n// 3. 服務 Sitemap\napp.get(&amp;#39;/sitemap.xml&amp;#39;, async (req, res) =&amp;gt; {\n    const entries = await seo.getStrategy().getEntries()\n    // 注意：SeoRenderer 需要 resolvers 和 mode 設定\n    const renderer = new SeoRenderer({ \n        baseUrl: &amp;#39;https://example.com&amp;#39;,\n        mode: &amp;#39;incremental&amp;#39;,\n        resolvers: []\n    })\n    const xml = renderer.render(entries, &amp;#39;https://example.com/sitemap.xml&amp;#39;)\n    \n    res.header(&amp;#39;Content-Type&amp;#39;, &amp;#39;application/xml&amp;#39;)\n    res.send(xml)\n})\n\napp.listen(port, () =&amp;gt; {\n  console.log(`Example app listening on port ${port}`)\n})\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h2&gt;Hono 整合&lt;/h2&gt;\n&lt;p&gt;如果您使用 Hono (如 Gravito 內部)，整合會更簡單且效能更好。&lt;/p&gt;\n&lt;pre&gt;&lt;code class=\&quot;language-typescript\&quot;&gt;import { Hono } from &amp;#39;hono&amp;#39;\nimport { SeoEngine, SeoRenderer } from &amp;#39;@gravito/luminosity&amp;#39;\n\nconst app = new Hono()\n\nconst seo = new SeoEngine({\n    mode: &amp;#39;cached&amp;#39;, // 對於 Serverless 環境推薦 cached 模式\n    baseUrl: &amp;#39;https://my-hono-app.com&amp;#39;,\n    resolvers: [] // 必須提供\n})\n\nawait seo.init()\n\napp.get(&amp;#39;/sitemap.xml&amp;#39;, async (c) =&amp;gt; {\n    const entries = await seo.getStrategy().getEntries()\n    const renderer = new SeoRenderer({ \n        baseUrl: &amp;#39;https://my-hono-app.com&amp;#39;,\n        mode: &amp;#39;cached&amp;#39;,\n        resolvers: []\n    })\n    \n    const xml = renderer.render(entries, c.req.url)\n    \n    return c.body(xml, 200, {\n        &amp;#39;Content-Type&amp;#39;: &amp;#39;application/xml&amp;#39;\n    })\n})\n\nexport default app\n&lt;/code&gt;&lt;/pre&gt;\n&lt;h2&gt;下一步&lt;/h2&gt;\n&lt;ul&gt;\n&lt;li&gt;了解 &lt;a href=\&quot;/zh/docs/configuration\&quot;&gt;配置選項&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;探索 &lt;a href=\&quot;/zh/docs/cli\&quot;&gt;CLI 工具&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n","toc":[],"sidebar":[{"title":"指南","items":[{"title":"介紹","href":"/zh/docs/introduction"},{"title":"快速開始","href":"/zh/docs/getting-started"},{"title":"框架整合","href":"/zh/docs/frameworks"},{"title":"CLI 命令列工具","href":"/zh/docs/cli"},{"title":"使用範例","href":"/zh/docs/examples"},{"title":"效能基準測試","href":"/zh/docs/benchmark"}]}],"currentPath":"/zh/docs/frameworks","locale":"zh"},"url":"/zh/docs/frameworks","version":"1.0.0"}'></div>
</body>

</html>